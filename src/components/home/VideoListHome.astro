---
import type { Video } from "@/lib/types"; // Ensure this type is accessible in Astro
import VideoCardHome from "./VideoCardHome.astro";
import { motion } from "framer-motion";
import { styles } from "@/components/text-element/ElementStyle";
import { cn } from "@/lib/utils";
import { Button } from "@/components/ui/button";

interface VideoListHomeProps {
  videos?: Video[];
  translations: Record<string, string>;
  lang?: string;
}

const { videos, translations, lang} = Astro.props as VideoListHomeProps;

const t = (key: string) => translations[key] || key;
---

{!videos || videos.length === 0 ? (
  <div class="text-center py-12">
    <h2 class="text-2xl font-semibold">No videos found</h2>
    <p class="text-muted-foreground mt-2">
      Please check your playlist ID or try again later.
    </p>
  </div>
) : (
  <div class="container py-12 space-y-12">
    <h1 class={cn(styles.heading, "text-center text-primary")}>
      {t("nav.news-media")}
    </h1>

    <p class={cn(styles.body, "text-center max-w-8xl mx-auto")}>
      {t("videos.list.description")}
    </p>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {videos.slice(0, 3).map((video: any) => (
        <VideoCardHome key={video.id} video={video} />
      ))}
    </div>
      <div class="grid justify-center">
        <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5, delay: 0.5 }}
        client:load
      >
        <a href={`/${lang}/videos`}>
          <Button className="bg-primary hover:bg-secondary text-white">
            {t("home.viewallvideo")}
          </Button>
        </a>
      </motion.div>
      </div>
  </div>
)}