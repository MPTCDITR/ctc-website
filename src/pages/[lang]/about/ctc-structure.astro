---
import Layout from "@/layouts/Layout.astro";
import StructureCtc from "@/components/about/StructureCtc.astro";
import { languages, ui } from "@/i18n/ui";
import { getLangFromUrl } from "@/lib/i18n";
import { CTC_STRUCTURE_PAGE_TITLE } from "@/consts";

import { getCollection } from "astro:content";

export async function getStaticPaths() {
  return Object.keys(languages).map((lang) => ({
    params: { lang },
  }));
}

const lang = getLangFromUrl(Astro.url);
const translations = ui[lang];

const nationalBoardMembers = (
  await getCollection("national-board-member")
).sort((a, b) => parseInt(a.id) - parseInt(b.id));
---

<Layout
  pageTitle={CTC_STRUCTURE_PAGE_TITLE.title}
  description={CTC_STRUCTURE_PAGE_TITLE.description}
  type="website"
>
  <StructureCtc
    lang={lang}
    translations={translations}
    nationalBoardMembers={nationalBoardMembers}
  />
</Layout>
